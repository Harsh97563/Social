
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}


model User {
  userId           String   @id @default(cuid())
  username         String?  @unique
  email            String   @unique
  profilePicSrc    String?   
  password         String?
  isVerified       Boolean  @default(false)
  verificationCode Int?
  posts  Post[] 
  LikedPosts Like[]
  comments Comment[]
  createdAt DateTime @default(now())
}

model Post {
  userId String 
  postId String @unique @id @default(cuid())
  caption String?
  files  String[] @default([])
  user User @relation(fields: [userId], references: [userId])
  LikedBy Like[]
  likesCount Int @default(0)
  comments Comment[]
  createdAt DateTime @default(now())
}


model Like {
  id String @id @default(uuid())
  postId String
  userId String
  user User @relation(fields: [userId], references: [userId])
  post Post @relation(fields: [postId], references: [postId])
  @@unique([postId, userId])
}

model Comment {
  id String @id @default(uuid())
  comment String
  postId String
  userId String
  post Post @relation(fields: [postId], references: [postId])
  user User @relation(fields: [userId], references: [userId])
}